<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <div style="" class="topnav">
        <a class="active" href="/myPageUser">Min side</a>
        <a href="/myClasses">Mine undervisningstimer</a>
        <a href="/classSiteUser">Alle undervisningstimer</a>
        <li class="nav-item">
            <a class="nav-link" href="/logout">Log ud</a>
        </li>

    </div>
    <h1>Min side</h1>
</head>

<style>
    /* Add a black background color to the top navigation */
    .topnav {
        background-color: #4C4480;
        overflow: hidden;
    }

    /* Style the links inside the navigation bar */
    .topnav a {
        float: left;
        color: #f2f2f2;
        text-align: center;
        padding: 14px 16px;
        text-decoration: none;
        font-size: 17px;
    }

    .navLogOut {
        float: right!important;

    }
    /* Change the color of links on hover */
    .topnav a:hover {
        background-color: #ddd;
        color: black;
    }

    /* Add a color to the active/current link */
    .topnav a.active {
        background-color: #C43796;
        color: white;
    }
</style>
<body onload="getUserInfo()">
<br>
<script>
    function getUserInfo () {
        /* OPTIMERING AF KODE:
            let cookieInfo = document.cookie
            console.log(cookieInfo) */
        // document cookie vil seperere ved hjælp af et ";" i tilfælde af flere cookies
        // der kan være en mulig bug hvis et brugernavn indeholder ";"
          /*  if(document.cookie.includes(";")) {
                for(i=0;i<document.cookie.split(';').length;i++){
                    if(document.cookie.split(';')[i].includes("username")){
                        var usernameValue = document.cookie.split(';')[i].split("=")[1]
                    }
                }
            } // else hvis der kun er én cookie
            else {
                var usernameValue = document.cookie.split("=")[1]
            }
        console.log(usernameValue);*/
        // sender info om usernamevalue. Prøver at finde en bruger med det username.
        // laver derefter et output, som er et div.
        fetch("http://localhost:3000/userInfo").then((res) => {
            return  res.json();
        }).then((data) =>{
            var parent = document.getElementById("output");

            // ignorere nogen i'er som man ikke gider at se
            for(i=0;i<Object.keys(data).length;i++){
if(i==0||i==10||i==7||i==9){
    console.log(`Ignore ${i}`)
} else{
                // Text (OPTIMERET KODE)
                // var div1 = document.createElement("div");
                var p = document.createElement("p");
                p.appendChild(document.createTextNode(Object.keys(data)[i]));
                // div1.appendChild(p);
                parent.appendChild(p)

                // Value
                // var div2 = document.createElement("div");
                var p = document.createElement("p");
                p.appendChild(document.createTextNode(data[Object.keys(data)[i]]));
                // div2.appendChild(p);
                parent.appendChild(p)

                //parent.appendChild(div1);
                //parent.appendChild(div2);
            }}

            var div3= document.createElement("div");
            var button = document.createElement("button");
            // eventlistener venter på at der bliver trykket på knappen
            // for at ændre på info ved hjælp af window.location.replace
            button.addEventListener("click", function() {
                window.location.replace("/changeuserinfo")
            })

            button.appendChild(document.createTextNode("Ændre informationer"));
            div3.appendChild(button);
            parent.appendChild(div3);
        }).catch((e) => {
            console.log(e);
        })
    }

</script>

<div id="output" style="display:grid;grid-template-columns:auto auto;"></div>
</body>

</html>
