<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Title</title>
        <div style="" class="topnav">
            <a href="/login">Login</a>
            <a class="active" href="/register">Register</a>
        </div>
    </head>
    <style>
        /* Add a black background color to the top navigation */
        .topnav {
            background-color: #4C4480;
            overflow: hidden;
        }

        /* Style the links inside the navigation bar */
        .topnav a {
            float: left;
            color: #f2f2f2;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
            font-size: 17px;
        }

        /* Change the color of links on hover */
        .topnav a:hover {
            background-color: #ddd;
            color: black;
        }

        /* Add a color to the active/current link */
        .topnav a.active {
            background-color: #C43796;
            color: white;
        }
    </style>
    <body>
    <br>
    <script>
      /*  function kasper () {
            console.log("hej")
            var url = window.location.pathname + window.location.search;
            var getQuery = url.split('?')[1];
            var params = getQuery.split('=')[1];
            alert(params);
        }*/
    </script>

<h1>Sign up here!</h1>

<div>
    <form>
<p>Name:</p>

    <input
            id="Name"
            type="text"
            required="true"
            placeholder="Name"
    />
    <br>
        <p>Birthday:</p>
        <input
                id="Day"
                type="text"
                required="true"
                size="4"
                placeholder="Day"
        />

        <select  id="Month"  required="true">
            <option selected disabled>Month</option>
            <option value="01" >01</option>
            <option value="02" >02</option>
            <option value="03" >03</option>
            <option value="04" >04</option>
            <option value="05" >05</option>
            <option value="06" >06</option>
            <option value="07" >07</option>
            <option value="08" >08</option>
            <option value="09" >09</option>
            <option value="10" >10</option>
            <option value="11" >11</option>
            <option value="12" >12</option>
        </select>

        <input
                id="Year"
                type="text"
                required="true"
                size="4"
                placeholder="Year"
        />
        <br>

        <p>Gender:</p>

        <select  id="Gender"  required="true">
            <option value="Man" >Man</option>
            <option value="Woman" >Woman</option>
            <option value="Else" >Else</option>
        </select>

    <br>

<p>Phonenumber:</p>
      <input
              id="Phonenumber"
              type="string"
              placeholder="Phonenumber"
              required="true"
              minlength=8,
      />
    <br>

        <p>Email:</p>
      <input
              id="Email"
              type="text"
              placeholder="Email"
              required="true"
      />
    <br>

<p>Username:</p>
    <input
            id="Username"
            type="text"
            placeholder="Username"
            required="true"
    />
    <br>

        <p>Password:</p>
    <input
            id="Password"
            type="password"
            placeholder="Adgangskode"
            required="true"
    />
    <br>
    <br>
    <a
            href="Login.ejs">
        <button
        >Go to Login</button></a>


        <input
                id="registration_btn"
                type="submit"
                value="Create User"

        />
    <br>
    </form>
</div>
    <script>
        document.getElementById("registration_btn").addEventListener("click", function() {
            let obj = { Name: document.getElementById("Name").value,
                Birthday: `${document.getElementById("Day").value}-${document.getElementById("Month").value}-${document.getElementById("Year").value}`,
                Gender: document.getElementById("Gender").value,
                Phonenumber: document.getElementById("Phonenumber").value,
                Email: document.getElementById("Email").value ,
                Username: document.getElementById("Username").value,
                Password: document.getElementById("Password").value
            }
            console.log(obj)
            let params = JSON.stringify(obj)
            console.log(params)
                fetch('/registerUser/'+params,{method: 'POST'}).then(function(response) {

                    if(response.ok){
                        console.log("User was created");
                        return
                    }
                    throw new Error('Request failed')
                }).catch(function(error){
                    console.log(error)
                })

        }
        )
        </script>
    <script src="classes/User.js"></script>
</div>
</body>
</html>